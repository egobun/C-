//////////////////////////////////////////////////////////////////////////////

#include <algorithm>
#include <print>
#include <vector>

//////////////////////////////////////////////////////////////////////////////

#include <gmock/gmock.h>

//////////////////////////////////////////////////////////////////////////////

#include <gtest/gtest.h>

//////////////////////////////////////////////////////////////////////////////

TEST(Expect, Test)
{
    std::print("Expect::Test\n"); EXPECT_TRUE(std::max(1, 2) == 1);

    std::print("Expect::Test\n"); EXPECT_TRUE(std::max(1, 2) == 2);
}

//////////////////////////////////////////////////////////////////////////////

TEST(Assert, Test)
{
    std::print("Assert::Test\n"); ASSERT_TRUE(std::max(1, 2) == 1);

    std::print("Assert::Test\n"); ASSERT_TRUE(std::max(1, 2) == 2);
}

//////////////////////////////////////////////////////////////////////////////

TEST(Assert, Near) 
{
    ASSERT_NEAR(1e-9, 2e-9, 1e-6);
}

//////////////////////////////////////////////////////////////////////////////

TEST(Assert, That)
{
    ASSERT_THAT("aaaaa", testing::StartsWith("aaa"));
}

//////////////////////////////////////////////////////////////////////////////

class Fixture : public testing::Test 
{
public :

    std::vector < int > vector;
};

//////////////////////////////////////////////////////////////////////////////

TEST_F(Fixture, Data) 
{
    vector.push_back(1); ASSERT_EQ(std::size(vector), 1); 
    
    vector.push_back(1); ASSERT_EQ(std::size(vector), 2); 
}

//////////////////////////////////////////////////////////////////////////////

class Adapter : public Fixture, public testing::WithParamInterface < int > {};

//////////////////////////////////////////////////////////////////////////////

TEST_P(Adapter, Data) 
{ 
    auto x = GetParam();
    
    vector.resize(x, 0);
    
    ASSERT_EQ(std::size(vector), x);
}

//////////////////////////////////////////////////////////////////////////////

INSTANTIATE_TEST_CASE_P(Fixture, Adapter, testing::Values(1, 2, 3, 4, 5));

//////////////////////////////////////////////////////////////////////////////

int main(int argc, char ** argv)
{
    testing::InitGoogleTest(&argc, argv);

//  -------------------------------------
    
    return RUN_ALL_TESTS();
}

//////////////////////////////////////////////////////////////////////////////