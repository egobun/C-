/////////////////////////////////////////////////////////////////////////////

#include <iterator>
#include <set>

/////////////////////////////////////////////////////////////////////////////

#include <benchmark/benchmark.h>

/////////////////////////////////////////////////////////////////////////////

void test(benchmark::State & state)
{
    for (auto element : state)
    {
        std::set < int > set;

		auto iterator = std::begin(set);

		for (auto i = 1'000; i > 0; --i)
		{
			set.insert(iterator, i);

			iterator = state.range(0) == 1 ? std::begin(set) : std::end(set);
		}

		benchmark::DoNotOptimize(set);
    }
}

/////////////////////////////////////////////////////////////////////////////

BENCHMARK(test)->Arg(1)->Arg(2);

/////////////////////////////////////////////////////////////////////////////

int main()
{
    benchmark::RunSpecifiedBenchmarks();
}

/////////////////////////////////////////////////////////////////////////////